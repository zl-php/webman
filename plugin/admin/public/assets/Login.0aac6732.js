var v=(a,e,i)=>new Promise((f,m)=>{var d=t=>{try{n(i.next(t))}catch(c){m(c)}},p=t=>{try{n(i.throw(t))}catch(c){m(c)}},n=t=>t.done?f(t.value):Promise.resolve(t.value).then(d,p);n((i=i.apply(a,e)).next())});import{aG as b,I as F,c as M,m as P,r as h,a as T,B as U,aI as l,o as $,aJ as z,p as s,i as r,j as o,q as w,t as L,s as N,b5 as V,x as A}from"./index.656c725e.js";import{B as K,a as j}from"./index.e8ce4467.js";import{b as O}from"./common.6ce55d48.js";import{a as q,b as E}from"./useLogin.d55d99c9.js";import"./index.ddc16f9d.js";import{F as B}from"./index.1f507897.js";import{C as G,R as J}from"./index.2c103eba.js";import"./useWindowSizeFn.2783558b.js";import"./FullscreenOutlined.52703f8e.js";import"./_baseIteratee.d7866646.js";const S=G,H=J,Q=B.Item,W=F.Password,{t:X}=M(),Y=P({username:"",password:"",captcha:""}),y=h(),C=h(""),g=h(!1),{validForm:Z}=E(y),{getFormRules:x}=q();function _(){C.value="/app/admin/plugin/app/captcha?r="+new Date().getTime()}_();const aa=T({components:{BasicModal:K,FormItem:Q,ACol:S,ARow:H,Input:F,Form:B,Button:U,InputPassword:W},emits:["reload","register"],setup(){const[a,{closeModal:e}]=j(),{createMessage:i}=A(),{success:f}=i;function m(){return v(this,null,function*(){const d=yield Z();if(!d)return;const p=setTimeout(()=>{_(),g.value=!1},2e3);g.value=!0,yield O("/app/admin/plugin/app/login",d),g.value=!1,clearTimeout(p),e(),f("\u767B\u5F55\u6210\u529F")})}return{formRef:y,formData:Y,loading:g,handleLogin:m,register:a,getFormRules:x,captchaUrl:C,t:X}}}),ea=r("div",{class:"px-4 py-2"},[r("div",{role:"alert",class:"mb-4 ant-alert ant-alert-info ant-alert-no-icon","data-show":"true"},[r("div",{class:"ant-alert-content"},[r("div",{class:"ant-alert-message"},[r("b",null,[w("\u6CE8\u610F\uFF1A\u6B64\u5904\u767B\u5F55 "),r("a",{href:"https://www.workerman.net",target:"_blank"},"workerman.net\u5B98\u7F51"),w(" \u8D26\u53F7")])])])])],-1),oa={class:"p-4"},sa=["src"];function ta(a,e,i,f,m,d){const p=l("Input"),n=l("FormItem"),t=l("InputPassword"),c=l("a-col"),I=l("a-row"),k=l("Button"),D=l("Form"),R=l("BasicModal");return $(),z(R,V(a.$attrs,{destroyOnClose:"",onRegister:a.register,title:"\u767B\u5F55workerman",showCancelBtn:!1,showOkBtn:!1}),{default:s(()=>[ea,r("div",oa,[o(D,{class:"p-4 enter-x",model:a.formData,rules:a.getFormRules,ref:"formRef",onKeypress:N(a.handleLogin,["enter"])},{default:s(()=>[o(n,{name:"username",class:"enter-x"},{default:s(()=>[o(p,{size:"large",value:a.formData.username,"onUpdate:value":e[0]||(e[0]=u=>a.formData.username=u),placeholder:a.t("sys.login.userName"),class:"fix-auto-fill"},null,8,["value","placeholder"])]),_:1}),o(n,{name:"password",class:"enter-x"},{default:s(()=>[o(t,{size:"large",visibilityToggle:"",value:a.formData.password,"onUpdate:value":e[1]||(e[1]=u=>a.formData.password=u),placeholder:a.t("sys.login.password")},null,8,["value","placeholder"])]),_:1}),o(n,{name:"captcha",class:"enter-x"},{default:s(()=>[o(I,{type:"flex",justify:"space-between",align:"middle"},{default:s(()=>[o(c,null,{default:s(()=>[o(p,{size:"large",value:a.formData.captcha,"onUpdate:value":e[2]||(e[2]=u=>a.formData.captcha=u),placeholder:a.t("sys.login.captcha"),class:"fix-auto-fill captcha-input",maxlength:5},null,8,["value","placeholder"])]),_:1}),o(c,null,{default:s(()=>[r("img",{src:a.captchaUrl,onClick:e[3]||(e[3]=(...u)=>a.switchCatpcha&&a.switchCatpcha(...u))},null,8,sa)]),_:1})]),_:1})]),_:1}),o(n,{class:"enter-x"},{default:s(()=>[o(k,{type:"primary",size:"large",block:"",onClick:a.handleLogin,loading:a.loading},{default:s(()=>[w(L(a.t("sys.login.loginButton")),1)]),_:1},8,["onClick","loading"])]),_:1})]),_:1},8,["model","rules","onKeypress"])])]),_:1},16,["onRegister"])}var wa=b(aa,[["render",ta]]);export{wa as default};
