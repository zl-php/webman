import{a2 as Q,a3 as U,a as B,aa as q,r as A,U as H,f as K,aC as Y,D as Z,an as ee,V as w,ac as N,ak as ae,b8 as $,J as o,j as c,_ as G,aS as re,T as h,aQ as te,aA as ne,cX as le}from"./index.656c725e.js";import{u as ie,b as oe}from"./index.ddc16f9d.js";function se(s){var e=Q();return U(function(){e.value=s()},{flush:"sync"}),e}var ue=function(){return{prefixCls:String,shape:{type:String,default:"circle"},size:{type:[Number,String,Object],default:function(){return"default"}},src:String,srcset:String,icon:q.any,alt:String,gap:Number,draggable:{type:Boolean,default:void 0},crossOrigin:String,loadError:{type:Function}}},ce=B({name:"AAvatar",inheritAttrs:!1,props:ue(),slots:["icon"],setup:function(e,S){var P=S.slots,l=S.attrs,g=A(!0),p=A(!1),y=A(1),i=A(null),x=A(null),T=H("avatar",e),m=T.prefixCls,k=ie(),n=K(function(){return e.size==="default"?k.value:e.size}),E=Y(),v=se(function(){if(Z(e.size)==="object"){var a=ee.find(function(t){return E.value[t]}),r=e.size[a];return r}}),O=function(r){return v.value?{width:"".concat(v.value,"px"),height:"".concat(v.value,"px"),lineHeight:"".concat(v.value,"px"),fontSize:"".concat(r?v.value/2:18,"px")}:{}},f=function(){if(!(!i.value||!x.value)){var r=i.value.offsetWidth,t=x.value.offsetWidth;if(r!==0&&t!==0){var u=e.gap,z=u===void 0?4:u;z*2<t&&(y.value=t-z*2<r?(t-z*2)/r:1)}}},b=function(){var r=e.loadError,t=r==null?void 0:r();t!==!1&&(g.value=!1)};return w(function(){return e.src},function(){N(function(){g.value=!0,y.value=1})}),w(function(){return e.gap},function(){N(function(){f()})}),ae(function(){N(function(){f(),p.value=!0})}),function(){var a,r,t=e.shape,u=e.src,z=e.alt,F=e.srcset,L=e.draggable,M=e.crossOrigin,C=$(P,e,"icon"),d=m.value,V=(a={},o(a,"".concat(l.class),!!l.class),o(a,d,!0),o(a,"".concat(d,"-lg"),n.value==="large"),o(a,"".concat(d,"-sm"),n.value==="small"),o(a,"".concat(d,"-").concat(t),t),o(a,"".concat(d,"-image"),u&&g.value),o(a,"".concat(d,"-icon"),C),a),X=typeof n.value=="number"?{width:"".concat(n.value,"px"),height:"".concat(n.value,"px"),lineHeight:"".concat(n.value,"px"),fontSize:C?"".concat(n.value/2,"px"):"18px"}:{},W=(r=P.default)===null||r===void 0?void 0:r.call(P),_;if(u&&g.value)_=c("img",{draggable:L,src:u,srcset:F,onError:b,alt:z,crossorigin:M},null);else if(C)_=C;else if(p.value||y.value!==1){var I="scale(".concat(y.value,") translateX(-50%)"),D={msTransform:I,WebkitTransform:I,transform:I},J=typeof n.value=="number"?{lineHeight:"".concat(n.value,"px")}:{};_=c(re,{onResize:f},{default:function(){return[c("span",{class:"".concat(d,"-string"),ref:i,style:G(G({},J),D)},[W])]}})}else _=c("span",{class:"".concat(d,"-string"),ref:i,style:{opacity:0}},[W]);return c("span",h(h({},l),{},{ref:x,class:V,style:[X,O(!!C),l.style]}),[_])}}}),j=ce,ve=function(){return{prefixCls:String,maxCount:Number,maxStyle:{type:Object,default:void 0},maxPopoverPlacement:{type:String,default:"top"},maxPopoverTrigger:String,size:{type:[Number,String,Object],default:"default"}}},fe=B({name:"AAvatarGroup",inheritAttrs:!1,props:ve(),setup:function(e,S){var P=S.slots,l=S.attrs,g=H("avatar-group",e),p=g.prefixCls,y=g.direction;return oe(e),function(){var i,x=e.maxPopoverPlacement,T=x===void 0?"top":x,m=e.maxCount,k=e.maxStyle,n=e.maxPopoverTrigger,E=n===void 0?"hover":n,v=(i={},o(i,p.value,!0),o(i,"".concat(p.value,"-rtl"),y.value==="rtl"),o(i,"".concat(l.class),!!l.class),i),O=$(P,e),f=te(O).map(function(t,u){return ne(t,{key:"avatar-key-".concat(u)})}),b=f.length;if(m&&m<b){var a=f.slice(0,m),r=f.slice(m,b);return a.push(c(le,{key:"avatar-popover-key",content:r,trigger:E,placement:T,overlayClassName:"".concat(p.value,"-popover")},{default:function(){return[c(j,{style:k},{default:function(){return["+".concat(b-m)]}})]}})),c("div",h(h({},l),{},{class:v,style:l.style}),[a])}return c("div",h(h({},l),{},{class:v,style:l.style}),[f])}}}),R=fe;j.Group=R;j.install=function(s){return s.component(j.name,j),s.component(R.name,R),s};export{j as A,se as e};
